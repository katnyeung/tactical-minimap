<!doctype html>
<html lang="en">
<head>
<title>Simple Map</title>
<meta name="viewport" content="initial-scale=1.0">
<meta charset="utf-8">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<style>
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
#map {
	height: 100%;
}
/* Optional: Makes the sample page fill the window. */
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}
</style>
</head>
<body ng-app="application">
	yrdy
	<div id="map"></div>
	<script>
		var map;
		function initMap() {
			map = new google.maps.Map(document.getElementById('map'), {
				center : {
					lat : 22.334600,
					lng : 114.147636
				},
				zoom : 16
			});

			var lck = {
				lat : 22.334600,
				lng : 114.147636
			};
			var marker = new google.maps.Marker({
				position : lck,
				map : map
			});

			infowindow = new google.maps.InfoWindow;
			infowindow.setContent($('#coord')[0]);

			google.maps.event.addListener(map, "rightclick", function(event) {
				var lat = event.latLng.lat();
				var lng = event.latLng.lng();
				$('#coord').find('[name="lat"]').val(lat);
				$('#coord').find('[name="lng"]').val(lng);

				var position = {
					lat : event.latLng.lat(),
					lng : event.latLng.lng()
				};
				infowindow.setPosition(position);

				infowindow.open(map);

			});

			marker.addListener('click', function() {
				infowindow.open(map, marker);
			});
		}
		$(document).ready(function() {
			$("#btnInfoMarker").click(function(e) {
				e.preventDefault();
				var lat = $('mouseLat').val();
				var lng = $('mouseLng').val();
				var message = $('markerMessage').val();

				$.ajax({
					type : "POST",
					url : '/marker/add',
					data : {
						'lat' : lat,
						'lng' : lng,
						'type' : 'info',
						'message' : message
					},
					success : function(data) {
						alert(data);
					}
				});
			});
			$("#btnWarningMarker").click(function(e) {
				console.log(e);
				e.preventDefault();
				var lat = $('mouseLat').val();
				var lng = $('mouseLng').val();
				var message = $('markerMessage').val();

				$.ajax({
					type : "POST",
					url : '/marker/add',
					data : {
						'lat' : lat,
						'lng' : lng,
						'type' : 'info',
					},
					success : function(data) {
						alert(data);
					}
				});
			});
		});
	</script>
	<div id="coord">
		<input type="text" name="lat" id="mouseLat" /> <input type="text" name="lng" id="mouseLng" />
		<table cellpadding="0" cellspacing="0">
			<tr>
				<td><button id="btnDangerMarker" href="#">Danger</button></td>
			</tr>
			<tr>
				<td><button id="btnWarningMarker" href="#">Warning</button></td>
			</tr>
			<tr>
				<td>
					<button id="btnInfoMarker" href="#">Info</button> <textarea id="markerMessage"></textarea>
				</td>
			</tr>

		</table>
	</div>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD291QMQdp512dSWTthRQ0-hCN2z32I96o&callback=initMap" async defer></script>
</body>
</html>